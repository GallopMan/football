<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ë¡ì‹¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #2d5016;
            --field-green: #5ba83f;
            --light-green: #7bc34a;
            --white: #ffffff;
            --gray-light: #f5f5f5;
            --gray-border: #ddd;
            --accent: #ff6b6b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* í—¤ë” */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: var(--white);
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: var(--primary-green);
            font-size: 28px;
        }

        .header-buttons {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-back {
            background: var(--gray-border);
            color: var(--primary-green);
        }

        .btn-back:hover {
            background: #ccc;
        }

        .btn-edit {
            background: var(--field-green);
            color: white;
        }

        .btn-edit:hover {
            background: var(--light-green);
        }

        /* ì‹œì¦Œ ì„ íƒ ì„¹ì…˜ */
        .season-section {
            background: var(--white);
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .season-section h3 {
            color: var(--primary-green);
            margin-bottom: 20px;
            font-size: 16px;
            font-weight: 600;
        }

        .season-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .season-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .season-input-group label {
            color: var(--primary-green);
            font-weight: 600;
            font-size: 13px;
        }

        .season-input-group input {
            padding: 10px;
            border: 2px solid var(--gray-border);
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .season-input-group input:focus {
            outline: none;
            border-color: var(--field-green);
        }

        .season-buttons {
            display: flex;
            gap: 12px;
        }

        .btn-create-season {
            flex: 1;
            padding: 12px;
            background: var(--field-green);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-create-season:hover {
            background: var(--light-green);
        }

        /* ì €ì¥ëœ ì‹œì¦Œ ëª©ë¡ */
        .seasons-list {
            margin-top: 20px;
        }

        .seasons-list h4 {
            color: var(--primary-green);
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 600;
        }

        .season-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--gray-light);
            border-radius: 8px;
            border-left: 4px solid var(--field-green);
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .season-item:hover {
            background: #e8f5e9;
            transform: translateX(4px);
        }

        .season-item.active {
            background: #e8f5e9;
            border-left-color: var(--light-green);
            box-shadow: 0 2px 8px rgba(91, 168, 63, 0.2);
        }

        .season-item-info {
            flex: 1;
        }

        .season-item-name {
            color: var(--primary-green);
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .season-item-date {
            color: #999;
            font-size: 12px;
        }

        .season-item-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-delete {
            background: var(--accent);
            color: white;
        }

        .btn-delete:hover {
            background: #ff5252;
        }

        /* íŒ€ ì •ë³´ */
        .team-selector {
            background: var(--white);
            padding: 20px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .team-info-display {
            background: var(--gray-light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--field-green);
        }

        .team-info-display h2 {
            color: var(--primary-green);
            font-size: 20px;
            margin-bottom: 10px;
        }

        .team-info-display p {
            color: #555;
            font-size: 14px;
            margin: 5px 0;
        }

        /* ì„ ìˆ˜ ëª©ë¡ */
        .players-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .player-card {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .player-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .player-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--gray-light);
        }

        .player-number {
            background: var(--field-green);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-right: 15px;
        }

        .player-name {
            flex: 1;
            color: var(--primary-green);
            font-weight: 700;
            font-size: 18px;
        }

        .player-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .stat-item {
            background: var(--gray-light);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .stat-item.edit-mode {
            border: 2px solid var(--field-green);
            background: #f0f8ff;
        }

        .stat-label {
            color: #999;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .stat-value {
            color: var(--primary-green);
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-controls {
            display: none;
            justify-content: center;
            gap: 8px;
        }

        .stat-item.edit-mode .stat-controls {
            display: flex;
        }

        .stat-btn {
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 50%;
            background: var(--field-green);
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.2s;
        }

        .stat-btn:hover {
            background: var(--light-green);
            transform: scale(1.1);
        }

        .stat-btn.minus {
            background: var(--accent);
        }

        .stat-btn.minus:hover {
            background: #ff5252;
        }

        /* MOM ì²´í¬ë°•ìŠ¤ */
        .mom-checkbox {
            display: none;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .stat-item.edit-mode .mom-checkbox {
            display: flex;
        }

        .mom-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .mom-checkbox label {
            cursor: pointer;
            color: var(--primary-green);
            font-weight: 600;
            font-size: 13px;
        }

        /* í•˜ë‹¨ ë²„íŠ¼ */
        .footer-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 40px;
        }

        .btn-large {
            padding: 14px 40px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-save-large {
            background: var(--field-green);
            color: white;
        }

        .btn-save-large:hover {
            background: var(--light-green);
            box-shadow: 0 4px 12px rgba(123, 195, 74, 0.3);
        }

        .btn-cancel-large {
            background: var(--gray-border);
            color: var(--primary-green);
        }

        .btn-cancel-large:hover {
            background: #ccc;
        }

        /* ë©”ì‹œì§€ */
        .success-message {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--field-green);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.3s ease-out;
        }

        .no-team-message {
            text-align: center;
            padding: 60px 20px;
            color: #999;
            font-size: 16px;
            font-style: italic;
        }

        .no-team-message a {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 30px;
            background: var(--field-green);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-style: normal;
            font-weight: 600;
            transition: all 0.3s;
        }

        .no-team-message a:hover {
            background: var(--light-green);
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .player-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }

            .header-buttons {
                width: 100%;
            }

            .header-buttons button {
                flex: 1;
            }

            .season-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ“Š ê¸°ë¡ì‹¤</h1>
            <div class="header-buttons">
                <button class="btn btn-back" onclick="goBack()">â† ë’¤ë¡œê°€ê¸°</button>
                <button class="btn btn-edit" id="editBtn" onclick="toggleEditMode()">ìˆ˜ì •</button>
            </div>
        </div>

        <!-- ì‹œì¦Œ ì„ íƒ ì„¹ì…˜ -->
        <div class="season-section">
            <h3>ğŸ“… ì‹œì¦Œ ê´€ë¦¬</h3>
            
            <div class="season-grid">
                <div class="season-input-group">
                    <label for="seasonName">ì‹œì¦Œ ì´ë¦„</label>
                    <input type="text" id="seasonName" placeholder="ì˜ˆ: 2024 ë´„ ì‹œì¦Œ">
                </div>
                <div class="season-input-group">
                    <label for="startDate">ì‹œì‘ì¼</label>
                    <input type="date" id="startDate">
                </div>
                <div class="season-input-group">
                    <label for="endDate">ì¢…ë£Œì¼</label>
                    <input type="date" id="endDate">
                </div>
            </div>

            <div class="season-buttons">
                <button class="btn-create-season" onclick="createSeason()">ì‹œì¦Œ ìƒì„±</button>
            </div>

            <!-- ì €ì¥ëœ ì‹œì¦Œ ëª©ë¡ -->
            <div class="seasons-list" id="seasonsList">
                <!-- ì €ì¥ëœ ì‹œì¦Œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- íŒ€ ì •ë³´ -->
        <div class="team-selector" id="teamSelector">
            <!-- íŒ€ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì„ ìˆ˜ ê¸°ë¡ -->
        <div class="players-container" id="playersContainer">
            <!-- ì„ ìˆ˜ë“¤ì˜ ê¸°ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <!-- í•˜ë‹¨ ë²„íŠ¼ (í¸ì§‘ ëª¨ë“œ) -->
        <div class="footer-buttons" id="footerButtons" style="display: none;">
            <button class="btn-large btn-save-large" onclick="saveRecords()">ì €ì¥</button>
            <button class="btn-large btn-cancel-large" onclick="cancelEdit()">ì·¨ì†Œ</button>
        </div>
    </div>

    <div class="success-message" id="successMessage">ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! âœ“</div>

    <script>
        let currentTeam = null;
        let isEditMode = false;
        let currentSeasonId = null;
        let seasons = []; // { id, name, startDate, endDate, records: {} }
        let tempRecords = {};

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            loadTeamData();
            loadSeasons();
            renderUI();
        });

        // íŒ€ ë°ì´í„° ë¡œë“œ
        function loadTeamData() {
            const savedData = localStorage.getItem('teamSetup');
            
            if (!savedData) {
                document.getElementById('teamSelector').innerHTML = `
                    <p class="no-team-message">
                        ì €ì¥ëœ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤.<br>
                        ë¨¼ì € íŒ€ì„ êµ¬ì„±í•´ì£¼ì„¸ìš”.<br>
                        <a href="index.html">â† ë©”ì¸ìœ¼ë¡œ</a>
                    </p>
                `;
                document.getElementById('playersContainer').innerHTML = '';
                return;
            }

            currentTeam = JSON.parse(savedData);
        }

        // ì‹œì¦Œ ë¡œë“œ
        function loadSeasons() {
            const saved = localStorage.getItem('allSeasons');
            if (saved) {
                seasons = JSON.parse(saved);
            }
        }

        // ì‹œì¦Œ ìƒì„±
        function createSeason() {
            const name = document.getElementById('seasonName').value.trim();
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (!name) {
                alert('ì‹œì¦Œ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!startDate || !endDate) {
                alert('ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (startDate > endDate) {
                alert('ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ í´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            const seasonId = Date.now().toString();
            const records = {};

            // ê° ì„ ìˆ˜ë³„ ê¸°ë¡ ì´ˆê¸°í™”
            currentTeam.players.forEach(player => {
                records[player.id] = {
                    name: player.name,
                    number: player.number,
                    matches: 0,
                    goals: 0,
                    assists: 0,
                    mom: 0
                };
            });

            const newSeason = {
                id: seasonId,
                name: name,
                startDate: startDate,
                endDate: endDate,
                records: records
            };

            seasons.push(newSeason);
            localStorage.setItem('allSeasons', JSON.stringify(seasons));

            // ì…ë ¥ì°½ ì´ˆê¸°í™”
            document.getElementById('seasonName').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';

            // ìƒˆë¡œ ìƒì„±ëœ ì‹œì¦Œ ì„ íƒ
            selectSeason(seasonId);
            renderSeasonsList();
        }

        // ì‹œì¦Œ ì„ íƒ
        function selectSeason(seasonId) {
            currentSeasonId = seasonId;
            const season = seasons.find(s => s.id === seasonId);
            
            if (season) {
                tempRecords = JSON.parse(JSON.stringify(season.records));
                renderUI();
            }
        }

        // ì‹œì¦Œ ì‚­ì œ
        function deleteSeason(seasonId, event) {
            event.stopPropagation();
            
            if (confirm('ì´ ì‹œì¦Œì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                seasons = seasons.filter(s => s.id !== seasonId);
                localStorage.setItem('allSeasons', JSON.stringify(seasons));

                if (currentSeasonId === seasonId) {
                    currentSeasonId = null;
                    tempRecords = {};
                }

                renderSeasonsList();
                renderUI();
            }
        }

        // ì‹œì¦Œ ëª©ë¡ ë Œë”ë§
        function renderSeasonsList() {
            const seasonsList = document.getElementById('seasonsList');

            if (seasons.length === 0) {
                seasonsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">ìƒì„±ëœ ì‹œì¦Œì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            let html = '<h4>ğŸ“‹ ì €ì¥ëœ ì‹œì¦Œ</h4>';

            seasons.forEach(season => {
                const isActive = currentSeasonId === season.id;
                const startDate = new Date(season.startDate).toLocaleDateString('ko-KR');
                const endDate = new Date(season.endDate).toLocaleDateString('ko-KR');

                html += `
                    <div class="season-item ${isActive ? 'active' : ''}" onclick="selectSeason('${season.id}')">
                        <div class="season-item-info">
                            <div class="season-item-name">${season.name}</div>
                            <div class="season-item-date">${startDate} ~ ${endDate}</div>
                        </div>
                        <div class="season-item-actions">
                            <button class="btn-small btn-delete" onclick="deleteSeason('${season.id}', event)">ì‚­ì œ</button>
                        </div>
                    </div>
                `;
            });

            seasonsList.innerHTML = html;
        }

        // UI ë Œë”ë§
        function renderUI() {
            if (!currentTeam) return;

            renderTeamInfo();
            renderPlayerRecords();
            renderSeasonsList();
        }

        // íŒ€ ì •ë³´ ë Œë”ë§
        function renderTeamInfo() {
            const onFieldPlayers = currentTeam.players.filter(p => p.onField);
            const subPlayers = currentTeam.players.filter(p => !p.onField);

            document.getElementById('teamSelector').innerHTML = `
                <h3>íŒ€ ì •ë³´</h3>
                <div class="team-info-display">
                    <h2> ${currentTeam.teamName}</h2>
                    <p>í•„ë“œ ì„ ìˆ˜: <strong>${onFieldPlayers.length}ëª…</strong></p>
                    <p>êµëŒ€ ì„ ìˆ˜: <strong>${subPlayers.length}ëª…</strong></p>
                    <p>ì „ì²´: <strong>${currentTeam.players.length}ëª…</strong></p>
                </div>
            `;
        }

        // ì„ ìˆ˜ ê¸°ë¡ ë Œë”ë§
        function renderPlayerRecords() {
            if (!currentSeasonId || Object.keys(tempRecords).length === 0) {
                document.getElementById('playersContainer').innerHTML = `
                    <p style="text-align: center; padding: 40px 20px; color: #999;">
                        ì‹œì¦Œì„ ì„ íƒí•´ì£¼ì„¸ìš”.
                    </p>
                `;
                return;
            }

            let html = '';

            const fieldPlayers = currentTeam.players.filter(p => p.onField);
            const benchPlayers = currentTeam.players.filter(p => !p.onField);
            const allPlayers = [...fieldPlayers, ...benchPlayers];

            allPlayers.forEach(player => {
                const record = tempRecords[player.id] || {
                    matches: 0,
                    goals: 0,
                    assists: 0,
                    mom: 0
                };

                html += `
                    <div class="player-card">
                        <div class="player-header">
                            <div class="player-number">${player.number}</div>
                            <div class="player-name">${player.name}</div>
                        </div>

                        <div class="player-stats">
                            <!-- ê²½ê¸°ìˆ˜ -->
                            <div class="stat-item" id="stat-matches-${player.id}">
                                <div class="stat-label">ê²½ê¸°ìˆ˜</div>
                                <div class="stat-value" id="value-matches-${player.id}">${record.matches}</div>
                                <div class="stat-controls">
                                    <button class="stat-btn minus" onclick="decrementStat(${player.id}, 'matches')">âˆ’</button>
                                    <button class="stat-btn" onclick="incrementStat(${player.id}, 'matches')">+</button>
                                </div>
                            </div>

                            <!-- ë“ì  -->
                            <div class="stat-item" id="stat-goals-${player.id}">
                                <div class="stat-label">ë“ì </div>
                                <div class="stat-value" id="value-goals-${player.id}">${record.goals}</div>
                                <div class="stat-controls">
                                    <button class="stat-btn minus" onclick="decrementStat(${player.id}, 'goals')">âˆ’</button>
                                    <button class="stat-btn" onclick="incrementStat(${player.id}, 'goals')">+</button>
                                </div>
                            </div>

                            <!-- ë„ì›€ -->
                            <div class="stat-item" id="stat-assists-${player.id}">
                                <div class="stat-label">ë„ì›€</div>
                                <div class="stat-value" id="value-assists-${player.id}">${record.assists}</div>
                                <div class="stat-controls">
                                    <button class="stat-btn minus" onclick="decrementStat(${player.id}, 'assists')">âˆ’</button>
                                    <button class="stat-btn" onclick="incrementStat(${player.id}, 'assists')">+</button>
                                </div>
                            </div>

                            <!-- MOM -->
                            <div class="stat-item" id="stat-mom-${player.id}">
                                <div class="stat-label">MOM</div>
                                <div class="stat-value" id="value-mom-${player.id}">${record.mom}</div>
                                <div class="mom-checkbox">
                                    <input type="checkbox" id="mom-${player.id}" 
                                        onchange="toggleMOM(${player.id})" 
                                        ${record.mom > 0 ? 'checked' : ''}>
                                    <label for="mom-${player.id}">ì„ ì •</label>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            document.getElementById('playersContainer').innerHTML = html;
        }

        // ìŠ¤íƒ¯ ì¦ê°€
        function incrementStat(playerId, statType) {
            if (!tempRecords[playerId]) {
                tempRecords[playerId] = { matches: 0, goals: 0, assists: 0, mom: 0 };
            }
            tempRecords[playerId][statType]++;
            updateStatDisplay(playerId, statType);
        }

        // ìŠ¤íƒ¯ ê°ì†Œ
        function decrementStat(playerId, statType) {
            if (!tempRecords[playerId]) {
                tempRecords[playerId] = { matches: 0, goals: 0, assists: 0, mom: 0 };
            }
            if (tempRecords[playerId][statType] > 0) {
                tempRecords[playerId][statType]--;
            }
            updateStatDisplay(playerId, statType);
        }

        // ìŠ¤íƒ¯ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateStatDisplay(playerId, statType) {
            const value = tempRecords[playerId][statType];
            document.getElementById(`value-${statType}-${playerId}`).textContent = value;
        }

        // MOM í† ê¸€
        function toggleMOM(playerId) {
            if (!tempRecords[playerId]) {
                tempRecords[playerId] = { matches: 0, goals: 0, assists: 0, mom: 0 };
            }
            const checkbox = document.getElementById(`mom-${playerId}`);
            tempRecords[playerId].mom = checkbox.checked ? 1 : 0;
            document.getElementById(`value-mom-${playerId}`).textContent = tempRecords[playerId].mom;
        }

        // í¸ì§‘ ëª¨ë“œ í† ê¸€
        function toggleEditMode() {
            if (!currentSeasonId) {
                alert('ì‹œì¦Œì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            isEditMode = !isEditMode;
            const editBtn = document.getElementById('editBtn');
            const footerButtons = document.getElementById('footerButtons');
            const statItems = document.querySelectorAll('.stat-item');

            if (isEditMode) {
                editBtn.textContent = 'í¸ì§‘ ì¤‘...';
                editBtn.style.background = '#ccc';
                editBtn.style.color = '#999';
                editBtn.style.cursor = 'not-allowed';
                footerButtons.style.display = 'flex';
                statItems.forEach(item => item.classList.add('edit-mode'));
            } else {
                editBtn.textContent = 'ìˆ˜ì •';
                editBtn.style.background = 'var(--field-green)';
                editBtn.style.color = 'white';
                editBtn.style.cursor = 'pointer';
                footerButtons.style.display = 'none';
                statItems.forEach(item => item.classList.remove('edit-mode'));
            }
        }

        // ê¸°ë¡ ì €ì¥
        function saveRecords() {
            const season = seasons.find(s => s.id === currentSeasonId);
            if (season) {
                season.records = JSON.parse(JSON.stringify(tempRecords));
                localStorage.setItem('allSeasons', JSON.stringify(seasons));

                const message = document.getElementById('successMessage');
                message.style.display = 'block';

                setTimeout(() => {
                    message.style.display = 'none';
                }, 2000);

                toggleEditMode();
            }
        }

        // í¸ì§‘ ì·¨ì†Œ
        function cancelEdit() {
            const season = seasons.find(s => s.id === currentSeasonId);
            if (season) {
                tempRecords = JSON.parse(JSON.stringify(season.records));
                renderPlayerRecords();
            }
            toggleEditMode();
        }

        // ë’¤ë¡œê°€ê¸°
        function goBack() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>