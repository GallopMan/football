<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒ€ ë§¤ë‹ˆì €</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background-color: #ffffff;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 24px;
            font-weight: bold;
            color: #2d5016;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #5ba83f;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .team-info-box {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #5ba83f;
            margin-bottom: 20px;
        }

        .team-info-box h3 {
            color: #2d5016;
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #5ba83f;
        }

        .team-logo-placeholder {
            font-size: 24px;
        }

        .team-info-box p {
            margin: 5px 0;
            color: #555;
            font-size: 14px;
        }

        .player-count {
            font-weight: bold;
            color: #5ba83f;
            font-size: 16px;
        }

        .players-section {
            margin-bottom: 20px;
        }

        .players-section h4 {
            color: #2d5016;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #5ba83f;
            font-size: 15px;
        }

        .player-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .player-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #5ba83f;
        }

        .player-number {
            background: #5ba83f;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
            font-size: 13px;
        }

        .player-name {
            color: #2d5016;
            font-weight: 600;
            font-size: 14px;
        }

        .no-team-message {
            color: #999;
            text-align: center;
            padding: 40px 20px;
            font-style: italic;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .modal-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .modal-close {
            background: #ddd;
            color: #2d5016;
        }

        .modal-close:hover {
            background: #ccc;
        }

        .modal-edit {
            background: #5ba83f;
            color: white;
        }

        .modal-edit:hover {
            background: #7bc34a;
        }

        .modal-auto {
            background: #2196F3;
            color: white;
        }

        .modal-auto:hover {
            background: #0b7dda;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ìƒë‹¨ ë©”ë‰´ -->
        <div class="top-menu">
            <a href="records.html">ê¸°ë¡ì‹¤</a>
            <a href="#" onclick="showMyTeam(event)">ë‚˜ì˜íŒ€</a>
            <a href="team-info.html">íŒ€ ì •ë³´ ìˆ˜ì •</a>
            <a href="login.html" class="login-link">ë¡œê·¸ì¸</a>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì¶•êµ¬ íŒ€ì§œê¸° -->
            <div class="section">
                <h2>ì¶•êµ¬ íŒ€ì§œê¸°</h2>
            </div>

            <!-- ìƒˆ íŒ€ì„ êµ¬ë¦¬ê¸° -->
            <div class="section">
                <h2>ìƒˆ íŒ€ì„ êµ¬ë¦¬ê¸°</h2>
            </div>

            <!-- í•˜ë‹¨ ë²„íŠ¼ë“¤ -->
            <div class="buttons-section">
                <button class="btn" onclick="location.href='team.html'">ì¶•êµ¬</button>
                <button class="btn" onclick="location.href='futsal.html'">í’‹ì‚´</button>
            </div>
        </div>
    </div>

    <!-- ë‚˜ì˜íŒ€ ëª¨ë‹¬ -->
    <div id="myTeamModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">ğŸ“‹ ë‚˜ì˜ íŒ€</div>
            <div class="modal-body" id="modalBody">
                <!-- íŒ€ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div class="modal-buttons">
                <button class="modal-close" onclick="closeModal()">ë‹«ê¸°</button>
                <button class="modal-edit" onclick="editTeam()">íŒ€ ìˆ˜ì •í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ë‚˜ì˜íŒ€ í´ë¦­ ì‹œ ëª¨ë‹¬ í‘œì‹œ
        function showMyTeam(event) {
            event.preventDefault();
            const savedData = localStorage.getItem('teamSetup');
            const modal = document.getElementById('myTeamModal');
            const modalBody = document.getElementById('modalBody');

            if (savedData) {
                const data = JSON.parse(savedData);
                const onFieldPlayers = data.players.filter(p => p.onField);
                const subPlayers = data.players.filter(p => !p.onField);

                // íŒ€ ì •ë³´ì—ì„œ ë¡œê³  ê°€ì ¸ì˜¤ê¸°
                const teamInfo = localStorage.getItem('teamInfo');
                let teamLogo = 'âš½';
                if (teamInfo) {
                    const info = JSON.parse(teamInfo);
                    if (info.logo) {
                        teamLogo = `<img src="${info.logo}" alt="íŒ€ ë¡œê³ " class="team-logo">`;
                    } else {
                        teamLogo = '<span class="team-logo-placeholder">âš½</span>';
                    }
                } else {
                    teamLogo = '<span class="team-logo-placeholder">âš½</span>';
                }

                let html = `
                    <div class="team-info-box">
                        <h3>${teamLogo} ${data.teamName}</h3>
                        <p>í•„ë“œ ì„ ìˆ˜: <span class="player-count">${onFieldPlayers.length}ëª…</span></p>
                        <p>êµëŒ€ ì„ ìˆ˜: <span class="player-count">${subPlayers.length}ëª…</span></p>
                        <p>ì „ì²´: <span class="player-count">${data.players.length}ëª…</span></p>
                    </div>

                    <div class="players-section">
                        <h4>í•„ë“œ ì„ ìˆ˜ (${onFieldPlayers.length}ëª…)</h4>
                `;

                if (onFieldPlayers.length > 0) {
                    html += '<div class="player-list">';
                    onFieldPlayers.forEach(player => {
                        html += `
                            <div class="player-item">
                                <div class="player-number">${player.number}</div>
                                <div class="player-name">${player.name}</div>
                            </div>
                        `;
                    });
                    html += '</div>';
                } else {
                    html += '<p style="color: #999; text-align: center; padding: 10px;">í•„ë“œ ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                }

                html += `
                    </div>

                    <div class="players-section">
                        <h4>êµëŒ€ ì„ ìˆ˜ (${subPlayers.length}ëª…)</h4>
                `;

                if (subPlayers.length > 0) {
                    html += '<div class="player-list">';
                    subPlayers.forEach(player => {
                        html += `
                            <div class="player-item">
                                <div class="player-number">${player.number}</div>
                                <div class="player-name">${player.name}</div>
                            </div>
                        `;
                    });
                    html += '</div>';
                } else {
                    html += '<p style="color: #999; text-align: center; padding: 10px;">êµëŒ€ ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                }

                html += '</div>';

                modalBody.innerHTML = html;
            } else {
                modalBody.innerHTML = `
                    <p class="no-team-message">
                        ì €ì¥ëœ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤.<br><br>
                        ë¨¼ì € íŒ€ì„ êµ¬ì„±í•´ì£¼ì„¸ìš”.
                    </p>
                `;
            }

            modal.style.display = 'block';
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('myTeamModal').style.display = 'none';
        }

        // íŒ€ ìˆ˜ì •í•˜ê¸°
        function editTeam() {
            closeModal();
            location.href = 'field.html';
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('myTeamModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="auth.js"></script>
</body>
</html>